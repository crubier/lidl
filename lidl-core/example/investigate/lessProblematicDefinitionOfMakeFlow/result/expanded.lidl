(
    ({
      theNumber:(new (theNumber?)?)
      theResult:(theNumber!)
    })
    with behaviour
    ( (theNumber?)  =   (
      ( result of if (
      ((new (theNumber?)!) is active!)
      with behaviour
      (apply (function isActive) to (new (theNumber?)!) and get ((new (theNumber?)!) is active?) )
    ) then (new (theNumber?)!) else (
      ( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) !)
      with behaviour
      (
      (activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) ?)
      with behaviour
      (
        apply
        (function whenThenElse)
        to
        ({  cond:(
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    )  source:(activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) !)   })
        and get
        ({a:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) b:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ))})
      )
    )
    ) !)
      with behaviour
      (
      (activation of when (
      ((new (theNumber?)!) is active!)
      with behaviour
      (apply (function isActive) to (new (theNumber?)!) and get ((new (theNumber?)!) is active?) )
    ) then (( result of if (
      ((new (theNumber?)!) is active!)
      with behaviour
      (apply (function isActive) to (new (theNumber?)!) and get ((new (theNumber?)!) is active?) )
    ) then (new (theNumber?)!) else (
      ( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) !)
      with behaviour
      (
      (activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) ?)
      with behaviour
      (
        apply
        (function whenThenElse)
        to
        ({  cond:(
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    )  source:(activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) !)   })
        and get
        ({a:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) b:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ))})
      )
    )
    ) ?) = (new (theNumber?)!)) else (( result of if (
      ((new (theNumber?)!) is active!)
      with behaviour
      (apply (function isActive) to (new (theNumber?)!) and get ((new (theNumber?)!) is active?) )
    ) then (new (theNumber?)!) else (
      ( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) !)
      with behaviour
      (
      (activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) ?)
      with behaviour
      (
        apply
        (function whenThenElse)
        to
        ({  cond:(
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    )  source:(activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) !)   })
        and get
        ({a:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) b:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ))})
      )
    )
    ) ?) = (
      ( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) !)
      with behaviour
      (
      (activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) ?)
      with behaviour
      (
        apply
        (function whenThenElse)
        to
        ({  cond:(
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    )  source:(activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) !)   })
        and get
        ({a:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) b:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ))})
      )
    )
    )) ?)
      with behaviour
      (
        apply
        (function whenThenElse)
        to
        ({  cond:(
      ((new (theNumber?)!) is active!)
      with behaviour
      (apply (function isActive) to (new (theNumber?)!) and get ((new (theNumber?)!) is active?) )
    )  source:(activation of when (
      ((new (theNumber?)!) is active!)
      with behaviour
      (apply (function isActive) to (new (theNumber?)!) and get ((new (theNumber?)!) is active?) )
    ) then (( result of if (
      ((new (theNumber?)!) is active!)
      with behaviour
      (apply (function isActive) to (new (theNumber?)!) and get ((new (theNumber?)!) is active?) )
    ) then (new (theNumber?)!) else (
      ( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) !)
      with behaviour
      (
      (activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) ?)
      with behaviour
      (
        apply
        (function whenThenElse)
        to
        ({  cond:(
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    )  source:(activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) !)   })
        and get
        ({a:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) b:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ))})
      )
    )
    ) ?) = (new (theNumber?)!)) else (( result of if (
      ((new (theNumber?)!) is active!)
      with behaviour
      (apply (function isActive) to (new (theNumber?)!) and get ((new (theNumber?)!) is active?) )
    ) then (new (theNumber?)!) else (
      ( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) !)
      with behaviour
      (
      (activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) ?)
      with behaviour
      (
        apply
        (function whenThenElse)
        to
        ({  cond:(
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    )  source:(activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) !)   })
        and get
        ({a:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) b:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ))})
      )
    )
    ) ?) = (
      ( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) !)
      with behaviour
      (
      (activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) ?)
      with behaviour
      (
        apply
        (function whenThenElse)
        to
        ({  cond:(
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    )  source:(activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) !)   })
        and get
        ({a:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) b:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ))})
      )
    )
    )) !)   })
        and get
        ({a:(( result of if (
      ((new (theNumber?)!) is active!)
      with behaviour
      (apply (function isActive) to (new (theNumber?)!) and get ((new (theNumber?)!) is active?) )
    ) then (new (theNumber?)!) else (
      ( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) !)
      with behaviour
      (
      (activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) ?)
      with behaviour
      (
        apply
        (function whenThenElse)
        to
        ({  cond:(
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    )  source:(activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) !)   })
        and get
        ({a:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) b:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ))})
      )
    )
    ) ?) = (new (theNumber?)!)) b:(( result of if (
      ((new (theNumber?)!) is active!)
      with behaviour
      (apply (function isActive) to (new (theNumber?)!) and get ((new (theNumber?)!) is active?) )
    ) then (new (theNumber?)!) else (
      ( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) !)
      with behaviour
      (
      (activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) ?)
      with behaviour
      (
        apply
        (function whenThenElse)
        to
        ({  cond:(
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    )  source:(activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) !)   })
        and get
        ({a:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) b:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ))})
      )
    )
    ) ?) = (
      ( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) !)
      with behaviour
      (
      (activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) ?)
      with behaviour
      (
        apply
        (function whenThenElse)
        to
        ({  cond:(
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    )  source:(activation of when (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) else (( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    )) !)   })
        and get
        ({a:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (1)) b:(( result of if (
      (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )!)
      with behaviour
      ((function boolNot)  (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    ) = (not (
      ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active!)
      with behaviour
      (apply (function isActive) to (
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) and get ((
      (previous(1)!)
      with behaviour
      ((previous(1)?)= previous (1))
    ) is active?) )
    )?) )
    ) then (1) else (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ) ?) = (
      (previous(theNumber!)!)
      with behaviour
      ((previous(theNumber!)?)= previous (theNumber!))
    ))})
      )
    )
    ))})
      )
    )
    ) )
  )